import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as o,d as i,o as r}from"./app-DRDqcPuo.js";const n={};function c(p,t){return r(),o("div",null,t[0]||(t[0]=[i('<h3 id="先说结论" tabindex="-1"><a class="header-anchor" href="#先说结论"><span>先说结论</span></a></h3><ul><li>在语义相同，有索引的情况下：group by 和 distinct 都能使用索引，效率相同</li><li>在语义相同，无索引的情况下：distinct 效率高于 group by。原因是 distinct 和 group by 都会进行分组操作，但是 group by 可能会进行排序，触发 filesort，导致 sql 执行效率低下</li></ul><h3 id="distinct-和-group-by-的语法区别" tabindex="-1"><a class="header-anchor" href="#distinct-和-group-by-的语法区别"><span>Distinct 和 group by 的语法区别</span></a></h3><p>Group by 可以进行单列去重，group by 的原理是先对结果进行分组排序，然后返回每组的第一条数据。且是根据 group by 的后续字段进行去重的</p><h3 id="为什么在语义相同-有索引的情况下-group-by-和-distinct-效率相同" tabindex="-1"><a class="header-anchor" href="#为什么在语义相同-有索引的情况下-group-by-和-distinct-效率相同"><span>为什么在语义相同，有索引的情况下，<code>group by</code> 和 <code>distinct</code> 效率相同？</span></a></h3><h3 id="在什么情况下-group-by-会进行排序操作" tabindex="-1"><a class="header-anchor" href="#在什么情况下-group-by-会进行排序操作"><span>在什么情况下，<code>group by</code> 会进行排序操作？</span></a></h3><p>在 MySQL 8.0 之前，group by 默认会一句字段进行隐式排序</p><p>对于能利用索引的情况下，group by 不需要额外进行排序；但当无法利用索引排序时，MySQL 优化器就不得不选择通过使用临时表然后在排序的方式实现 group by</p><p>当结果集的大小超过系统设置的临时表的大小时，MySQL 会将临时表数据 copy 到磁盘上面在进行操作，语句的执行效率会变得很低</p><p>这也是 MySQL 选择将此操作弃用的原因</p><p>同时也可以通过 order by null 的方式禁止隐式排序</p><h3 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接"><span>参考链接</span></a></h3><ul><li><a href="https://mp.weixin.qq.com/s/pyJ6g1qOadbjus6Ri7y1Xg" target="_blank" rel="noopener noreferrer">京东一面：MySQL 中的 distinct 和 group by 哪个效率更高？太刁钻了吧！</a></li></ul>',13)]))}const l=e(n,[["render",c],["__file","03_MySQL 中的 distinct 和 group by 哪个效率更高.html.vue"]]),y=JSON.parse(`{"path":"/resource/code/03_database/01_mysql/03_MySQL%20%E4%B8%AD%E7%9A%84%20distinct%20%E5%92%8C%20group%20by%20%E5%93%AA%E4%B8%AA%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98.html","title":"MySQL 中的 distinct 和 group by 哪个效率更高","lang":"zh-CN","frontmatter":{"title":"MySQL 中的 distinct 和 group by 哪个效率更高","tag":["MySQL"],"description":"先说结论 在语义相同，有索引的情况下：group by 和 distinct 都能使用索引，效率相同 在语义相同，无索引的情况下：distinct 效率高于 group by。原因是 distinct 和 group by 都会进行分组操作，但是 group by 可能会进行排序，触发 filesort，导致 sql 执行效率低下 Distinct 和...","head":[["meta",{"property":"og:url","content":"https://logycoconut.github.io/resource/code/03_database/01_mysql/03_MySQL%20%E4%B8%AD%E7%9A%84%20distinct%20%E5%92%8C%20group%20by%20%E5%93%AA%E4%B8%AA%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98.html"}],["meta",{"property":"og:site_name","content":"logycoconut's k-lab"}],["meta",{"property":"og:title","content":"MySQL 中的 distinct 和 group by 哪个效率更高"}],["meta",{"property":"og:description","content":"先说结论 在语义相同，有索引的情况下：group by 和 distinct 都能使用索引，效率相同 在语义相同，无索引的情况下：distinct 效率高于 group by。原因是 distinct 和 group by 都会进行分组操作，但是 group by 可能会进行排序，触发 filesort，导致 sql 执行效率低下 Distinct 和..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-11T14:19:39.000Z"}],["meta",{"property":"article:tag","content":"MySQL"}],["meta",{"property":"article:modified_time","content":"2025-02-11T14:19:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MySQL 中的 distinct 和 group by 哪个效率更高\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-11T14:19:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"logycoconut\\",\\"url\\":\\"https://logycoconut.github.io/\\"}]}"]]},"headers":[{"level":3,"title":"先说结论","slug":"先说结论","link":"#先说结论","children":[]},{"level":3,"title":"Distinct 和 group by 的语法区别","slug":"distinct-和-group-by-的语法区别","link":"#distinct-和-group-by-的语法区别","children":[]},{"level":3,"title":"为什么在语义相同，有索引的情况下，group by 和 distinct 效率相同？","slug":"为什么在语义相同-有索引的情况下-group-by-和-distinct-效率相同","link":"#为什么在语义相同-有索引的情况下-group-by-和-distinct-效率相同","children":[]},{"level":3,"title":"在什么情况下，group by 会进行排序操作？","slug":"在什么情况下-group-by-会进行排序操作","link":"#在什么情况下-group-by-会进行排序操作","children":[]},{"level":3,"title":"参考链接","slug":"参考链接","link":"#参考链接","children":[]}],"git":{"createdTime":1690289097000,"updatedTime":1739283579000,"contributors":[{"name":"logycoconut","username":"logycoconut","email":"logycoconut@foxmail.com","commits":5,"url":"https://github.com/logycoconut"}]},"readingTime":{"minutes":1.33,"words":400},"filePathRelative":"resource/code/03_database/01_mysql/03_MySQL 中的 distinct 和 group by 哪个效率更高.md","localizedDate":"2023年7月25日","autoDesc":true}`);export{l as comp,y as data};
