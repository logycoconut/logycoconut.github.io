import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o,c as r,a as e,b as n,d,f as i}from"./app-e0178adb.js";const c={},l=i(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ğŸ’¡ Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶, æ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="ä¸¾ä¸ªğŸŒ°" tabindex="-1"><a class="header-anchor" href="#ä¸¾ä¸ªğŸŒ°" aria-hidden="true">#</a> ä¸¾ä¸ªğŸŒ°</h2><h3 id="æ„å»ºä¸€ä¸ª-nginx-é•œåƒ-å¹¶åˆå§‹åŒ–ä¸€ä¸ª-index-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ„å»ºä¸€ä¸ª-nginx-é•œåƒ-å¹¶åˆå§‹åŒ–ä¸€ä¸ª-index-æ–‡ä»¶" aria-hidden="true">#</a> æ„å»ºä¸€ä¸ª <code>nginx</code> é•œåƒï¼Œå¹¶åˆå§‹åŒ–ä¸€ä¸ª <code>index</code> æ–‡ä»¶</h3><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token comment"># æŒ‡å®šåŸºç¡€é•œåƒä¸º nginx</span>
<span class="token instruction"><span class="token keyword">FROM</span> nginx</span>

<span class="token comment"># åœ¨ä¸Šå±‚åŸºç¡€ä¹‹ä¸Šåœ¨ /usr/share/nginx/html ç›®å½•å¢åŠ ä¸€ä¸ª index.html æ–‡ä»¶</span>
<span class="token instruction"><span class="token keyword">RUN</span> echo <span class="token string">&#39;è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ„å»ºçš„nginxé•œåƒ&#39;</span> &gt; /usr/share/nginx/html/index.html</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ„å»ºä¸€ä¸ª-java8-é•œåƒ" tabindex="-1"><a class="header-anchor" href="#æ„å»ºä¸€ä¸ª-java8-é•œåƒ" aria-hidden="true">#</a> æ„å»ºä¸€ä¸ª <code>Java8</code> é•œåƒ</h3><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token comment"># æŒ‡å®šåŸºç¡€é•œåƒä¸º java8</span>
<span class="token instruction"><span class="token keyword">FROM</span> java:8</span>

<span class="token comment"># æ‹·è´å½“å‰ç›®å½•åˆ°é•œåƒä¸­çš„ /var/my/java ç›®å½•</span>
<span class="token instruction"><span class="token keyword">COPY</span> . /var/my/java  </span>

<span class="token comment"># è®¾ç½®å·¥ä½œç›®å½•ä¸º /var/my/java</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /var/my/java  </span>

<span class="token comment"># ç¼–è¯‘ Hello.java æ–‡ä»¶</span>
<span class="token instruction"><span class="token keyword">RUN</span> javac Hello.java</span>

<span class="token comment"># å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œ java Hello</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;java&quot;</span>, <span class="token string">&quot;Hello&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æŒ‡ä»¤ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#æŒ‡ä»¤ä½œç”¨" aria-hidden="true">#</a> æŒ‡ä»¤ä½œç”¨</h2><table><thead><tr><th>æŒ‡ä»¤å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>FROM</td><td>æŒ‡å®šåŸºç¡€é•œåƒ</td></tr><tr><td>MAINTAINER</td><td>æŒ‡å®šç»´æŠ¤è€…ä¿¡æ¯</td></tr><tr><td>RUN</td><td>æƒ³åœ¨å®¹å™¨é‡Œæ‰§è¡Œä»€ä¹ˆå‘½ä»¤</td></tr><tr><td>ADD</td><td>ç»™å®¹å™¨ä¸€ç‚¹å¯åŠ¨èµ„é‡‘</td></tr><tr><td>WORKDIR</td><td>æŒ‡å®šå½“å‰å·¥ä½œç›®å½•ï¼Œç±»ä¼¼ CD</td></tr><tr><td>VOLUME</td><td>è®¾ç½®å·ï¼ŒæŒ‚è½½ä¸»æœºç›®å½•</td></tr><tr><td>EXPOSE</td><td>æ‰“å¼€</td></tr><tr><td>CMD</td><td>å®¹å™¨å¯åŠ¨åè¦å¹²çš„äº‹æƒ…</td></tr></tbody></table><h3 id="ä¸Šä¸‹æ–‡è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#ä¸Šä¸‹æ–‡è·¯å¾„" aria-hidden="true">#</a> ä¸Šä¸‹æ–‡è·¯å¾„</h3><p><code>docker build -t nginx:v .</code></p><p>ç”±äº docker çš„è¿è¡Œæ¨¡å¼æ˜¯ C/Sã€‚æˆ‘ä»¬æœ¬æœºæ˜¯ Cï¼Œdocker å¼•æ“æ˜¯ Sã€‚å®é™…çš„æ„å»ºè¿‡ç¨‹æ˜¯åœ¨ docker å¼•æ“ä¸‹å®Œæˆçš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æ— æ³•ç”¨åˆ°æˆ‘ä»¬æœ¬æœºçš„æ–‡ä»¶ã€‚è¿™å°±éœ€è¦æŠŠæˆ‘ä»¬æœ¬æœºçš„æŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶ä¸€èµ·æ‰“åŒ…æä¾›ç»™ docker å¼•æ“ä½¿ç”¨ã€‚</p><p>å¦‚æœæœªè¯´æ˜æœ€åä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¸Šä¸‹æ–‡è·¯å¾„å°±æ˜¯ Dockerfile æ‰€åœ¨çš„ä½ç½®</p><p>ä¸Šä¸‹æ–‡è·¯å¾„ä¸‹ä¸è¦æ”¾æ— ç”¨çš„æ–‡ä»¶ï¼Œå› ä¸ºä¼šä¸€èµ·æ‰“åŒ…å‘é€ç»™ docker å¼•æ“ï¼Œå¦‚æœæ–‡ä»¶è¿‡å¤šä¼šé€ æˆè¿‡ç¨‹ç¼“æ…¢</p><h3 id="from" tabindex="-1"><a class="header-anchor" href="#from" aria-hidden="true">#</a> FROM</h3><p>æŒ‡å®šåŸºç¡€é•œåƒï¼Œåç»­çš„æ“ä½œéƒ½æ˜¯åŸºäºåŸºç¡€é•œåƒï¼ˆ <code>Dockerfile</code>æ–‡ä»¶å¿…é¡»ä»¥ <code>FROM</code> ä½œä¸ºç¬¬ä¸€è¡Œï¼‰</p><h3 id="label" tabindex="-1"><a class="header-anchor" href="#label" aria-hidden="true">#</a> LABEL</h3><p>ä¸ºé•œåƒæ·»åŠ æ ‡ç­¾</p><p><code>LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...</code></p><p>ä¾‹å¦‚ <code>LABEL author=&quot;logycoconut&quot; version=0.1</code></p><h3 id="run" tabindex="-1"><a class="header-anchor" href="#run" aria-hidden="true">#</a> RUN</h3><p><code>RUN</code> æŒ‡ä»¤æœ‰ä¸¤ç§å½¢å¼</p><ul><li><code>RUN &lt;command&gt; (shell form, the command is run in a shell, which by default is /bin/sh -c on Linux or cmd /S /C on Windows)</code></li><li><code>RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code></li></ul><p>æ¯ä¸€ä¸ª <code>RUN</code> æŒ‡ä»¤éƒ½ä¼šæ„å»ºæ–°çš„ä¸€å±‚</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token comment"># åº”è¯¥é¿å…ä¸‹é¢è¿™ç§å½¢å¼ï¼Œä¼šäº§ç”Ÿéå¸¸å¤šå±‚çš„é•œåƒï¼Œå¢åŠ æ„å»ºéƒ¨ç½²çš„æ—¶é—´</span>
<span class="token instruction"><span class="token keyword">RUN</span> apk upgrade</span>
<span class="token instruction"><span class="token keyword">RUN</span> apk add python3</span>

<span class="token comment"># æ¨èçš„å½¢å¼ï¼Œä»¥ &amp;&amp; ç¬¦å·è¿æ¥å‘½ä»¤</span>
<span class="token instruction"><span class="token keyword">RUN</span> apk upgrade &amp;&amp; \\<span class="token operator">\\</span></span>
    apk add python3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cmd" tabindex="-1"><a class="header-anchor" href="#cmd" aria-hidden="true">#</a> CMD</h3><p><code>CMD</code> å‘½ä»¤ç±»ä¼¼äº <code>RUN</code>ï¼Œä¸åŒç‚¹åœ¨äºè¿è¡Œçš„æ—¶é—´ç‚¹</p><ul><li><code>CMD</code> åœ¨docker run æ—¶è¿è¡Œ</li><li><code>RUN</code> æ˜¯åœ¨ docker build æ—¶è¿è¡Œ</li></ul><p><code>CMD</code> å‘½ä»¤æœ‰ä¸‰ç§å½¢å¼</p><ul><li><p><code>CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]</code>Â (<em>exec</em>Â form, this is the preferred form)</p></li><li><p><code>CMD command param1 param2</code>Â (<em>shell</em>Â form)</p></li><li><p><code>CMD [&quot;param1&quot;,&quot;param2&quot;]</code>Â (ä½œä¸º <em>ENTRYPOINT çš„é»˜è®¤å‚æ•°</em>)</p></li></ul><h3 id="copyã€add" tabindex="-1"><a class="header-anchor" href="#copyã€add" aria-hidden="true">#</a> COPYã€ADD</h3><p><em>ADD æŒ‡ä»¤å’Œ COPY çš„ä½¿ç”¨æ ¼å¼ä¸€è‡´ï¼ˆåŒæ ·éœ€æ±‚ä¸‹ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ COPYï¼‰</em></p><p><code>COPY</code> å‘½ä»¤æœ‰ä¸¤ç§å½¢å¼</p><ul><li><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;</code></li><li><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;src&gt;&quot;,... &quot;&lt;dest&gt;&quot;]</code></li></ul><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>sourceè·¯å¾„å¿…é¡»åœ¨æ„å»ºçš„ä¸Šä¸‹æ–‡ä¹‹å†…ã€‚ä¸èƒ½ä½¿ç”¨ <code>COPY ../a/b</code>çš„å½¢å¼ï¼Œå› ä¸ºdockeræ„å»ºçš„ç¬¬ä¸€æ­¥æ˜¯å°†ä¸Šä¸‹æ–‡è·¯å¾„å‘é€åˆ°dockerå¼•æ“</li><li>å¦‚æœsourceæ˜¯ç›®å½•ï¼Œåˆ™ä¼šå¤åˆ¶ç›®å½•çš„å…¨éƒ¨å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®</li></ol><p><strong>ADDæŒ‡ä»¤ä¸CPOYæŒ‡ä»¤å¯¹æ¯”</strong></p><ul><li><p>ADD çš„ä¼˜ç‚¹ï¼šåœ¨æ‰§è¡Œ <code>&lt;src&gt;</code> ä¸º tar å‹ç¼©æ–‡ä»¶ï¼Œå‹ç¼©æ ¼å¼ä¸º gzip, bzip2 ä»¥åŠ xz çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨å¤åˆ¶å¹¶è§£å‹åˆ° <code>&lt;dest&gt;</code></p></li><li><p>ADD çš„ç¼ºç‚¹ï¼šåœ¨ä¸è§£å‹çš„å‰æä¸‹ï¼Œæ— æ³•å¤åˆ¶ tar å‹ç¼©æ–‡ä»¶ã€‚ä¼šä»¤é•œåƒæ„å»ºç¼“å­˜å¤±æ•ˆï¼Œä»è€Œå¯èƒ½ä¼šä»¤é•œåƒæ„å»ºå˜å¾—æ¯”è¾ƒç¼“æ…¢ã€‚å…·ä½“æ˜¯å¦ä½¿ç”¨ï¼Œå¯ä»¥æ ¹æ®æ˜¯å¦éœ€è¦è‡ªåŠ¨è§£å‹æ¥å†³å®šã€‚</p></li></ul><h3 id="env" tabindex="-1"><a class="header-anchor" href="#env" aria-hidden="true">#</a> ENV</h3><p>è®¾ç½®ç¯å¢ƒå˜é‡, <code>ENV &lt;key1&gt;=&lt;value1&gt; &lt;key2&gt;=&lt;value2&gt;...</code></p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token comment"># Dockerfile è®¾ç½®äº† VERSION=0.1</span>
<span class="token instruction"><span class="token keyword">ENV</span> VERSION=0.1</span>

<span class="token comment"># åœ¨é•œåƒå¯åŠ¨çš„å®¹å™¨ä¸­ echo</span>
root@caa46eb11ab6:/# echo $VERSION
0.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="arg" tabindex="-1"><a class="header-anchor" href="#arg" aria-hidden="true">#</a> ARG</h3><p><code>ARG</code> ä¸<code>ENV</code> ä½œç”¨ä¸€è‡´ï¼Œä½œç”¨åŸŸä¸åŒ</p><p>ARG è®¾ç½®çš„ç¯å¢ƒå˜é‡ä»…å¯¹ Dockerfile å†…æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ docker build çš„è¿‡ç¨‹ä¸­æœ‰æ•ˆï¼Œæ„å»ºå¥½çš„é•œåƒå†…ä¸å­˜åœ¨æ­¤ç¯å¢ƒå˜é‡</p><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-hidden="true">#</a> å‚è€ƒèµ„æ–™</h2>`,44),p={href:"https://docs.docker.com/engine/reference/builder/#environment-replacement",target:"_blank",rel:"noopener noreferrer"},u={href:"https://www.cnblogs.com/edisonchou/p/dockerfile_inside_introduction.html",target:"_blank",rel:"noopener noreferrer"},m={href:"https://www.yiibai.com/docker/docker-dockerfile.html",target:"_blank",rel:"noopener noreferrer"};function h(v,k){const a=t("ExternalLinkIcon");return o(),r("div",null,[l,e("ul",null,[e("li",null,[e("a",p,[n("Dockerå®˜æ–¹æ–‡æ¡£"),d(a)])]),e("li",null,[e("a",u,[n("ä½ å¿…é¡»çŸ¥é“çš„Dockerfile - Edison Zhou"),d(a)])]),e("li",null,[e("a",m,[n("Dockerfileç¤ºä¾‹ä¸è§£æ - æ˜“ç™¾æ•™ç¨‹"),d(a)])])])])}const f=s(c,[["render",h],["__file","02_Dockerfileå¸¸ç”¨æŒ‡ä»¤ä»‹ç»ä¸ç¤ºä¾‹.html.vue"]]);export{f as default};
